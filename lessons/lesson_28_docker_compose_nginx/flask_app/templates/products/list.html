{% extends 'products/base.html' %}

{% block title %}
    Product list
{% endblock %}

{% block messages %}
    {% with messages = get_flashed_messages() %}
        {% for message in messages %}
            <div class="alert alert-info" role="alert">
                You added {{ message }} last time
            </div>
        {% endfor %}
    {% endwith %}
    {% if session['last_product_name'] %}
        <div class="alert alert-info" role="alert">
            You added {{ session['last_product_name'] }} last time
        </div>
        {% set _ = session.pop('last_product_name') %}
    {% endif %}
{% endblock %}

{% block body %}
    <h1>Products</h1>
    <div class="row">
        <div class="col-12 col-sm-6 col-lg-8">
            <div class="list-group">

                {% for product in products %}
                    {# Show name of product #}
        {#            <li>{{ product.name }}</li>#}
                    <a class="list-group-item link-primary"
                       href="{{ url_for('products_app.details', product_id=product.id) }}"
                        >{{ product.name }}</a>
                {% endfor %}
            </div>
        </div>

    <div class="col-12 col-sm-6 col-lg-4">
        <div class="card mt-3 mt-sm-0">
          <img
                  src="https://agronom.expert/wp-content/uploads/2019/07/istoriya-proishozhdeniya-i-rasprostraneniya-kartoshki2.jpg"
                  class="card-img-top my-3"
                  alt="Belarus potato">
          <div class="card-body">
            <h5 class="card-title">Belarus potato</h5>
            <p class="card-text">Buy this Belarus potato to be happy</p>
            <a href="#" class="btn btn-primary">Buy</a>
          </div>
        </div>
        </div>
    </div>

{% include 'products/components/add-new-product.html' %}
{% include 'products/components/back-to-the-main.html' %}
{% endblock %}
